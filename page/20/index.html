<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.83.0"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>un01s notes</title><meta name=description content="un01s notes - https://github.com/un01s/notes"><meta name=author content="un01s"><link rel=canonical href=https://un01s.github.io/notes/><link crossorigin=anonymous href=/notes/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe+FVUFzPh7U=" rel="preload stylesheet" as=style><link rel=icon href=https://un01s.github.io/notes/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://un01s.github.io/notes/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://un01s.github.io/notes/favicon-32x32.png><link rel=apple-touch-icon href=https://un01s.github.io/notes/apple-touch-icon.png><link rel=mask-icon href=https://un01s.github.io/notes/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://un01s.github.io/notes/index.xml><link rel=alternate type=application/json href=https://un01s.github.io/notes/index.json><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="un01s notes"><meta property="og:description" content="un01s notes - https://github.com/un01s/notes"><meta property="og:type" content="website"><meta property="og:url" content="https://un01s.github.io/notes/"><meta name=twitter:card content="summary"><meta name=twitter:title content="un01s notes"><meta name=twitter:description content="un01s notes - https://github.com/un01s/notes"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"un01s notes","url":"https://un01s.github.io/notes","description":"un01s notes - https://github.com/un01s/notes","thumbnailUrl":"https://un01s.github.io/notes/favicon.ico","sameAs":["https://github.com/un01s/","https://twitter.com/un01s"]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://un01s.github.io/notes accesskey=h title="un01s notes (Alt + H)">un01s notes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://un01s.github.io/notes/archives title=Archive><span>Archive</span></a></li><li><a href=https://un01s.github.io/notes/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://un01s.github.io/notes/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://un01s.github.io/notes/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2>Reading Toit Code (002)</h2></header><div class=entry-content><p>After toit_start(), we have toit_esp32.cc to read. The first one is toit::start(). Toit here is just a namespace. As we know that toit supports OTA (over-the-air update) through WiFi and esp32 device is set to be a station (STA instead of AP).
What we have here is as follows:
RtcMemory::set_up(); FlashRegistry::set_up(); OS::set_up(); esp_partition_find_first(); setup_program(support_ota); Scheduler::ExitState exit_state; VM vm; vm.load_platform_event_sources(); int groud_id = vm.scheduler()->next_group_id(); exit_state = vm.scheduler()->run_boot_program(program, null, group_id); OS::tear_down(); FlashRegistry::tear_down(); After these, esp32 may go to deep sleep....</p></div><footer class=entry-footer><span title="2022-03-01 14:47:53 -0600 -0600">March 1, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;un01s</footer><a class=entry-link aria-label="post link to Reading Toit Code (002)" href=https://un01s.github.io/notes/posts/20220301/></a></article><article class=post-entry><header class=entry-header><h2>Reading Toit Code (001)</h2></header><div class=entry-content><p>When I started to port the code to ESP32S3 following the example of ESP32C3, I realized I had to read the code closely. Here are the notes along the way.
Where does the code get started on esp32? Based on esp-idf, Toit (I like to pronounce it as tight) creates a new platform with a new programming language for developers.
For the code to start on the esp32 device, check all the files inside toolchains/esp32/....</p></div><footer class=entry-footer><span title="2022-02-25 14:51:27 -0600 -0600">February 25, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;un01s</footer><a class=entry-link aria-label="post link to Reading Toit Code (001)" href=https://un01s.github.io/notes/posts/20220225/></a></article><article class=post-entry><header class=entry-header><h2>Invasion!</h2></header><div class=entry-content><p>Today Putin ordered troops into pro-Russian region of eastern Ukraine in the name of peacekeeping. Ukraine invaded.
Then I saw the news of Dr. Paul Farmer. “The idea that some lives matter less is the root of all that is wrong with the world.”</p></div><footer class=entry-footer><span title="2022-02-21 14:55:05 -0600 -0600">February 21, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;un01s</footer><a class=entry-link aria-label="post link to Invasion!" href=https://un01s.github.io/notes/posts/20220221/></a></article><article class=post-entry><header class=entry-header><h2>Infinite Dead</h2></header><div class=entry-content><p>I remember once offering to an editor an article which began with a reference to the experience of last century. “Oh,” he said, “leave out the history and come to the present.” I felt like going to him over a thousand miles and taking him by the lapels and saying, “Dear, dear jackass! Don’t you understand that the past is the present; that without what was, nothing is? That, of the infinite dead, the living are but unimportant bits?...</p></div><footer class=entry-footer><span title="2022-02-04 14:57:08 -0600 -0600">February 4, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;un01s</footer><a class=entry-link aria-label="post link to Infinite Dead" href=https://un01s.github.io/notes/posts/20220204/></a></article><article class=post-entry><header class=entry-header><h2>Do not ask your children</h2></header><div class=entry-content><p>Do not ask your children
to strive for extraordinary lives.
Such striving may seem admirable,
but it is the way of foolishness.
Help them instead to find the wonder
and the marvel of an ordinary life.
Show them the joy of tasting
tomatoes, apples and pears.
Show them how to cry
when pets and people die.
Show them the infinite pleasure
in the touch of a hand.
And make the ordinary come alive for them...</p></div><footer class=entry-footer><span title="2022-02-03 14:59:21 -0600 -0600">February 3, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;un01s</footer><a class=entry-link aria-label="post link to Do not ask your children" href=https://un01s.github.io/notes/posts/20220203/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://un01s.github.io/notes/page/19/>«&nbsp;Prev&nbsp;</a>
<a class=next href=https://un01s.github.io/notes/page/21/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2023 <a href=https://un01s.github.io/notes>un01s notes</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>